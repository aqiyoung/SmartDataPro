@echo off
chcp 65001 >nul

:: åˆ‡æ¢åˆ°è„šæœ¬æ‰€åœ¨ç›®å½•
cd /d "%~dp0"

:: ç»Ÿä¸€æ–‡æ¡£è½¬æ¢å·¥å…· - å¯åŠ¨è„šæœ¬
:: åŒæ—¶å¯åŠ¨å‰ç«¯å’ŒåŽç«¯æœåŠ¡

echo ========================================
echo ç»Ÿä¸€æ–‡æ¡£è½¬æ¢å·¥å…· å¯åŠ¨è„šæœ¬
echo ========================================

echo.
echo [1/2] å¯åŠ¨åŽç«¯æœåŠ¡...
cd backend
start "Backend Server" python main.py
echo åŽç«¯æœåŠ¡å·²å¯åŠ¨ï¼Œè¿è¡Œåœ¨ http://localhost:8006/

:: ç­‰å¾…åŽç«¯æœåŠ¡åˆå§‹åŒ–
timeout /t 2 /nobreak >nul

echo.
echo [2/2] å¯åŠ¨å‰ç«¯æœåŠ¡...
cd ..\frontend
start "Frontend Server" npm run dev
echo å‰ç«¯æœåŠ¡å·²å¯åŠ¨ï¼Œè¿è¡Œåœ¨ http://localhost:5180/

:: ç­‰å¾…å‰ç«¯æœåŠ¡åˆå§‹åŒ–
timeout /t 3 /nobreak >nul

cd ..
echo.
echo ========================================
echo ðŸŽ‰ æ‰€æœ‰æœåŠ¡å·²æˆåŠŸå¯åŠ¨ï¼
echo ========================================
echo å‰ç«¯è®¿é—®åœ°å€: http://localhost:5180/
echo åŽç«¯è®¿é—®åœ°å€: http://localhost:8006/
echo ========================================
echo æŒ‰ä»»æ„é”®å…³é—­æ‰€æœ‰æœåŠ¡å¹¶é€€å‡º...
echo ========================================

:: ç­‰å¾…ç”¨æˆ·è¾“å…¥
pause >nul

:: å…³é—­æ‰€æœ‰æœåŠ¡
echo.
echo ========================================
echo æ­£åœ¨åœæ­¢æ‰€æœ‰æœåŠ¡...
echo ========================================

:: å…³é—­åŽç«¯æœåŠ¡
TASKKILL /FI "WINDOWTITLE eq Backend Server" /F >nul 2>&1
echo åŽç«¯æœåŠ¡å·²åœæ­¢

:: å…³é—­å‰ç«¯æœåŠ¡
TASKKILL /FI "WINDOWTITLE eq Frontend Server" /F >nul 2>&1
echo å‰ç«¯æœåŠ¡å·²åœæ­¢

echo.
echo ========================================
echo æ‰€æœ‰æœåŠ¡å·²åœæ­¢ï¼Œè„šæœ¬é€€å‡ºã€‚
echo ========================================

:: æš‚åœä»¥æŸ¥çœ‹ç»“æžœ
timeout /t 2 /nobreak >nul